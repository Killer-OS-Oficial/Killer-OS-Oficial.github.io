{"hash":"ec202a1bf990ee54ab5e1ace734762290dcb6831","data":{"markdownPage":{"id":"b50e8c711c48bf7be135303c62da955e","title":"Timeshift, rsync","description":"","date":null,"date_up":"13.08.2020","path":"/wiki/backup/timeshift-rsync/","timeToRead":3,"content":"<h1 id=\"apoyo\"><a href=\"#apoyo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Apoyo</h1>\n<h2 id=\"timeshift\"><a href=\"#timeshift\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Timeshift</h2>\n<p>Un excelente programa para crear copias de seguridad y restaurar el sistema: <strong>Timeshift</strong>. Esta utilidad crea instantáneas de btrfs y funciona con estándares ext a través de <strong>rsync </strong>. Instalación.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 832 630' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-117280eac7002e49050cdbebfd10a777'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-117280eac7002e49050cdbebfd10a777)' width='832' height='630' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAwCAIAAAAuKetIAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAIq0lEQVRo3u1aSXMbxxXWX8oplR%2bQS3LwSaly%2bZJLcskxt1QprsolVc5VUcqlcmRJLkWkuEiipNiSbJIACGCwDpbZAMy%2bYmawkgQ3gcrX08BwSFqUlUviMh4bw56et339Xnej5uFap9MRRbEZkSRJzUskCELMEBPHce1Wi%2bf55GCn076sodVqiYJwQRZGeZ5rvpt4jhcFEdfLdmOjsKUoyrVGo9HtelFzq2x13p%2b1IPB5ga9Wq77fjQfRt20rlUmrqgIGz3MxiOvrb7%2bFAYwkNeQZBhrCMIhlHdd5%2beqVpqkXOM%2bM%2br5mKmWe0Uw18P2kXcPQBVGAIPqWZQLGNZZlYZs%2b%2b%2btnf9N1DX3Xc%2bkgxNafPLlz755pmdRX13XCXihJ4s9%2b/osXX/97dzwCGArgl7/69fWPPxmNhnARbH7g25b129/9/tbnn%2b/ujh3HxmC/Hza45kfXf7Px/NloOMCgF9lKtmF/%2bDL79Z9u//F17hv0ITWzGwawu7m91euFsAiHMfszALiXWtLLV6/bnTb8pgKAiHFB4NkaS0diG4ZhrD1ep5NBx%2bHKdiqVzeeoOB1xHKdQLGCezsvqDMMgAWLOZDNMgxhtcWvfrPAShzlMysqKzHHNOBozALjRVCWby%2b7kc9lsti3LcMs09XQmk2OYUqlULBbQzxcLqkribpna5vZ2pVplioVWu03VSaKQZ/K5PIOJwC3YuGb9u60tlq1m8/nNzU3N0Gnct9Np5CRTKEit1mUMlWpla3s7n8tV2Xomk85kM7VGk6YDMjaVTufzuSYnIAi6nojAfMoNTBtSIpo80iz8IQ8sE1d7/ohw2iYGvShVKKdLnpqYlaQ4%2bqZpxCGKs9l2iFr3LFBnjSo0LQOCM7sJha5r0xEayRkAaER69fq9fr8/GAz29vf29nbx2d8/a5PJfkSkD7ZerwdOLAZc5zyEIrYzqYODyWg0wmIYDAfj8RhhgQikIT8cDnDtD/pJfqoHSqg52pnsJ3Xux46dAYD3e5NDPwj9IBiNx2/fR9AMAGGvD/7haHQ185s3b%2bBpEPaOj0/CIEC2hWEPuwimCjENe723H0inp6f0P0JEAVTDMOw7yuH%2bLjzb3cV1H5sGOrvj8XAID0cADT%2bmczo6OppMJsfHx5jgyeRgmnh0gWDs6OgQnDCI25Pjk2PcHx6dnJxAyTRyZfpf0psZgBpSKOjt3L2hVLfqnFgql3FC1dgKFhNZakwBRwdbq8PJGL2mdrCy27LCsuXNzW3MZWJiLk5VP/Rdz49CccIw%2bWKpXCyWsC9BORKIslHR04tz/J44zAAQRb1wcnD0Znr69sdDZwAQAS8Is/duqLVUtd4sFIstSaxWSATwJaJWY3mOw15JZ4VedU1GBGRFrbLlTDo72t29IgK9oGu73ShVTrAfQxWs5nJZlq1XK6VcodSssaVKReAabL1eLldgrsrWsDyoih8UAbKreObB3hhJiexEuuOKNUc701OE5pwiksHIa2T0yQlWCrL56qmazmKL9UCyf0K2lwn6ZJs6PDrGojg8hC3oJGqPDrFfTQ4OfmgEyEEWhMLWkq%2bLqq63Ox3sw5qqappmWQ6%2bsWBJdGSZOkEd6YUBOdHCUNPVTkd5J4Bo/rAR9AdDcjedkkMBZJo4DMi543ptSbQcV8MXGFU1DU1RoHbwYSmEXQhHQOPVV67cwNECx3E2GjjlDKPrB7qmybIMA9PECgm6Hizh64dhaI16k%2b6871p5%2b3vj4WhMAUiiiLkAReoJ4bRGtkitNjm2TANqgeqDAWARv/2x0TkAOAdIdpxeRReEY5q%2bb8tLihNu8ple0IDw0kPjsq2fRgQWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAfqoAorcS5981TKN3BbM3zPF7hGn8DiEejN8mxMwJkXP98%2b09lHxJkVB%2b1gfN343WalGlzYkarfM4ge%2bHUSUwCOKGW4925q3rR7e0mDl/lBTpnmkI/YRst9t1L1fHYuu4RjzevDDn0bIkpCJb3TAkpSldV2cALNOwbcd2fcvSbRs6fEHgavW6JIk8zwu4CBxIljuCwDej8i4v4AknirjlaOGNjx4RTp4jT4lIs90mtWRRFJrNBhUhhWdR0HWdFqCSDSOGoWmaCqchrqgqRjRNMQy93qhLLcnQNSWyVamUTdPEIwqAhSbP0brsZ0HhD175z6HXKpXKG8%2bfra4s377z5fLa%2bvKjhw%2bWlvLF4rONJ/fu37//4F/La49X1lZfv365/vR5eidz//7d1ScbGy%2beY3Bt/fHDldXlR0sPl5bSmZ0v7txZWVt7tLL86PHTp08f//PeV%2btPn7Ta7TAMaHX0fPkZjumj0QD82TwzGPTgvWloN2/9/Ysv766uPtp48eLmrX/c%2bPRTTmpbJoCR1%2btV2/EdtRCmP5qot3vZ615rw7QDVZUV4JXbumFEM6HKsmwYBqn52Zama7qh01tw6YTIiGkY9Nay4Ao4NHhAmHXNMCM9Ud%2b0zMvJAwxUCglDK4KAhDxBQGC902lDM/oQV1SFBmceAcd1Dc7f%2bXiP/0uwc93Xc2ytuZXazjNMoZBnSsVypYxpTmXSOYZB%2bJgCs5PLFoqFAqnAop8DZz6fxZzlSQ2mAIZMNptKpQpFplypbG6n0js7pTIp14InnU7Vm9zlAiupXtomPGYrFRjK7GQEUUJA6EqISgqkOAujHsHmqeoMQM22DK8besKDIPuJ17jpeV2KPv55AS3TXvi1Ab2eS4P5YFIqmSQgsqz92QJ9RwQQWF3VVEWVESisClKKtS0uWmyIA9LPjCrwZwAsGtBu6JiS2/WBz40KwB/QvO8Z9LyrRr4XALxHTmLpI0qlSgUokSeu59q2sUV%2bBpDPZNJIBEXVEAEgbDSa17At2IRM0hx31vkfNUylZRl0KdMR2okGLVwt20Q0SHMsrDTsa9eSP7dpNur4NP8vCdky/9%2bgfbiNbeY/KbDKqSquBWgAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"832\" alt=\"Timeshift\" data-srcset=\"/assets/static/timeshift.82a2fbd.90b666b2f110a2a99a8d8759a708f653.png 480w, /assets/static/timeshift.288616b.90b666b2f110a2a99a8d8759a708f653.png 832w\" data-sizes=\"(max-width: 832px) 100vw, 832px\" data-src=\"/assets/static/timeshift.288616b.90b666b2f110a2a99a8d8759a708f653.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/timeshift.288616b.90b666b2f110a2a99a8d8759a708f653.png\" width=\"832\" alt=\"Timeshift\"></noscript></p>\n<pre class=\"language-bash\"><code class=\"language-bash\">yay -S timeshift</code></pre>\n<p>La interfaz es muy sencilla, lo principal es configurar correctamente las excepciones.</p>\n<p>Esto es necesario para que no descargue directorios grandes e innecesarios en su sistema. esto ahorra tiempo y espacio en disco al tiempo que mantiene el rendimiento. Como ejemplo, puedo citar el directorio virtualbox, por ejemplo, no lo necesito en la copia del sistema, incluido el disco montado <code>/home/killer/files</code>, creo que entiendes la idea.</p>\n<p>Aquí está mi lista de reglas. Es importante destacar que las reglas de exclusión deben estar por encima del directorio de inicio, cambiar arrastrando y soltando.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 702 609' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-73cadf37aa3341bee2a6e3729378f25f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-73cadf37aa3341bee2a6e3729378f25f)' width='702' height='609' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA4CAIAAADCemklAAAACXBIWXMAAA7EAAAOxAGVKw4bAAALy0lEQVRo3t2aV3cbuRWA/f/fUx4Sn5Nt9q6067WtYvbeyWFvQ4rksEkkxSr2IucDQFKy4z3JU8QEBxphgAvMvbgdxKv7%2b16/f69qp3P3rHZ6vW632/my844eVZlIBUaBqXoA6KohASMBjjAK4NC/ny4h9zB3d7ftdktV2re8tds8ZUN00ri/vz/i/EqNqeFyuWQYtVqtyrNSuSkUCzc3Tz3VauXmptxqNZvNRqvV0PViqVwCjGF6VAWm2WrW67VSSafNKH9Mp91o1BUAc/nQzY2YWOU7lYqClENNhnK5TD6fzWbTmhZLp5OZTDKVStKjaqGQA4Mj2hBwC6GK1mKxwCrUmlHTC3mT2eTzBw3DkKtXwR4APsrX6vWqw2H/eHnl8bjDMa0uCBYTS6UiaOl6/vLyyuawmy1Wk9VqMps/mU1FXWcuZLMVPq/HbLPTb7FZL68/Od0uk8VqczhYRNcLoAhYOhU/Oz%2b/uLowWUxnZ%2bcur7dcZixXLOahs9PZo/1EABVCEwktmYwnEvFkMpFKJXgeXnlqNDKZlKrZXCaTScuaOlamyEY6m82oBjWdTqW/BFBz6T9MfFqHLQdFVSFGNRTeqkGnkq6vCYADLcF943lFcr7qoTYa1DpVvkqAxlezDKO%2bh9lDHqYoSWvI0Waz/hxGQEkA8AMTWYWsttqirRRA9R%2bx3xPQ63XQhtFogA6NRsPJZCzqeDgY9B8mE9EzHlHH4xGvDNGDwqFuKJF4Gw2ZS/9YQj5Mxg8SRqqs1MjbNsBCO9kjgURLaSrtjhzoKguBlov3WwD4z4bSlt9p30p4UFWG5AsCBoPB1fX169d///HN93/92%2bvf3r9/e/7rT2/fXlxdO12O7374/tff37/5%2bc35u3fnv5599%2bNPv5ydff%2bP1%2bfvL4OhkMNuOfvt3eXV5e8fL3746cffP358%2b8svP7z5%2be3Z2Z//8ie7y1OtlM9/e%2bfxejw%2bn8/v9/i8Xp/P5XaHI2GrzXZt%2buRwOe0OO20zqmIxO9zumBaz2iyg5HC6LBSbze5wMN3hdNhd7qaQfhB/RgCWTNOiJpPJ7XH7g8FAKMgqtN1eL0Jvs9s8Pr/T5fIFQDjocLkY8njdUS2eLxQz6aTL4/EH/Ey0Ox3BcMQfCDDsdDkdDhsyizwkkgkh7JR0OpvDhuTz%2bVw8rvGhfLEgbRqSI%2bVKyY%2b0h8gg/OFVNITYtIQ1lUx4vv1KhNrIzxB5GfRpDGgP%2brRpYKpFP52iqCEBJl7u4Tay1z3OGjGt32NkOOwP1YT7HnaLLfcHgoEALBCboGma2%2bNywxOvJxiJfIWNUsVbIXK3SoSUtZF4t4Us3bae1yclHkh8pWtQjf6eon5f/r%2bXzfsvqhrev/b/pUd0DkfDh4fJ9GHyIOtE6pBsP0zpnYwHf1j6g39XWF8QAGPYZhbc7R43m812t/38%2bTOKVLrBAdUwAVC4XG8%2bn155fHxkrwUBULNarTay0Lvdbter5WK53G4hakd5fPzG5N1LF/BEhl/J0IIopAND4azNZl0uF6PxA6FJuYSaZoo6PlTPZTPxRDyRTBWLOk4emwcZkrYXK3xdEKA4QGs6na5Wa%2bKFzWYNctvNGj3FRYnYBsdj1EVDeKgG7PoGU15ChPYcUDo3m03n83kkEl6v1/P5AmVrC/vV7ogI8g4TNhqNO8KtdIR/rhkvTsMTASg0mop9WCwWBIDrNVu8xpc2G/VsNkf8gQzlcjk4QKhET7d3v1wsTooDfTw/279cLgmYECEIgBgR0vcIMURQgZqMxsICdjpdggcZ3jRPSIQIL0BuNpsFAoEVJmixwrbelPVoNEYUihNFg2uGkU7GNU2oMjYfy3sSBCglHg6Hi8Uc6SciF2Z0s8GM4mvgCeyYzQRzYBGELeYzjBVMAwYleDwRDhBvjMdjMMaMwoHpbI7MFHJZvz8QjkRiMS0UDOby%2bVA4REwFS5rN1nyxPBUOIC04Acw/jgxZggMKgh5srTCpW0bW4m%2b9Fg5kJ/YdLe/d90%2bBA7c4Mqwk4TyG6Pr6Gg0YjydEUJlUwkn06fOGwmG/z4c5crtcQb8vHI35fd5SqUw8pYh5cQ4MFQfY%2b263K730TgYX660IJ3YbtfnrfaDB23w2n85mJ2KFvuDA5eUl2jyZTHHDyYRGZkDgTv7h83mLegk357A7vR53Lpu7qVReNsj7ggP4ASXxODUl94Qa7LkK58Tmb7biud7AHqztdDpTS5waB8YfPryHkuFoTBaKDpCEhCLhmKaFQ6FCQY/AgoAvmUqjALNTskJD6QcWKr5THNhsN/Sw2TyJ87D9%2bAFeaSxXK7WEyB%2b2u5fnAAEDAZs8jJh8%2bnS9D6e7vWw6FRRJYDyZTLL1lWo1oWmkxOVKBYctEt1kutFsv5QsfcEBnDEbjIWBHuUHMDtIOvaUSvCDm4MBD5MxOSbgul4CcncaOiDOSomYZbb6YDabiRpAGnta0guZTBbzL2ouSyqQzmSMagXsF9L%2bSJ92En5AnCAg35gZ8mAMveTACr6IUyd5agwY8U%2bn21Ux3ONJJTT3ovRQ1EM0uiJsgxvyRLrWFKVVN2p3d7e6XiY5Izcw6gYhaq1SzucL4wdpUl80Gu0jQsK8LJeZTFrlA4Q6AmNymZI4Ci%2bXyu3btl4URRelgG5XKxXhsA%2bx00tGoyQDmEtCaLDDOOKnRtIVCBslf6sADHeHUOHzjJoxeXhyZCrFfuGMTOXEcAB9FR53u53PprVqRRwH5vM58XtDBouZz6Zq9QbaDpGn44nb6hgMK0kmkMtlQW61Xi/wx4M%2bpmk6m4pUcjyWR3aDxXzelkeViJw80BQnyY1m87/v0f41oRmhxG63CzJm80W/1yvrxXCI2DmWSCRi0ShMCIUjqUTS6/GQ5eh6MZlMuNw%2bFAIOvhgBKqXET6EC7D2buhWFAG5D/EAyKY3SHB6sRES9motsYYxt3T2eihkVwZxyZBSTyUQoMZ0tEBhCCcJpf8DPfgcD/nyh6Hc7Q1GtUCh27jrSiT2dzL2gI2uNpMVEpkEIGhhg18lXYMhO7POjPKt7hCEr6YBf3od9JUIQQC6PsUdEarUK6Lbad3ksTybldLr9gQAppdvlzGay44MbPiFPrEIJpFykL4eUUg0rvVQMUfhigiaCUafEAaUDWCEVcl5cfESbR%2bMJtrKkF10OVzgcSiTTfr/P7/cmUzmjUd/udqclQjKlHMmEZqsSGoo4H92sUeiFZA4%2bbia14qR%2b4HjiAN6A7SenkUm95EC7TQAU9AdiWjRXKAaD/khUI4WpGfXTikYVB4SZXy3RAeLnnfyViaAaJrDxU5FGTiCSRPkUOaCskNPpqFaF/RGObLPBCmHs261GCqnPZoqlCr5Zzvl8igTAARVOwwF2GgVYynAan9CSP%2bSuTvVHvicz%2bvl/sPxHBJyIz/q/5oD6pf549Utm8E9XyJ7372u32zsC9BRY95uQx0WeVXW7rPdHkN/43B/D0BY3trCbh1tA4saOaog7MvK6zvFeUK1WfX5ZqN1utuU9DXVJg1d5MaOmrpYpSHFzo7W/4dMWtaUWrFZv6vWnG0fqcwrseHdIXEarVZ%2buG9VrTXFlqKkuvKlZ6ikIkHfaqmRVWMzL66urT8TUZqvdHgwFWaZuGOLKW/UG6GAw8PHi6tpkstptFrszEg58uLoyWyxmq420kyXJ/g2jbrVaLsUyZovN7vF5A34/ABarNRgKQwEwtVrNMPh8o1gsXF1fs5rN4fR4PTeVirouVZFF/p5bA2lNi3y4uHR53HaHI5cviAtTEivGX3U6HV0vJJPiLpmmRQMBH643FA5GY5FYLCpOD9NJRkulYiaTDocDhEbRaCQcCUmAsIKMRMLxhCZv5OVTqQSLRKMkESH6YwJMANCjxWPyRllB3T2jzRMfzyLAAHDsJPsrFvPqVSKgsXdRCZNIxg%2bdcfZCcABJEBf95NXERuNwi0w8a4qVVCUhSoTobygAY9%2bgU8kYYIr1h0X26zxfEEFSNyEPcmIcPrrvBBm1lMJKIlY9wtA%2bgsGcfwKzWY0Vh5kINgAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"702\" alt=\"Timeshift exclude\" data-srcset=\"/assets/static/exclude-timeshift.15c3bad.da62010dce8c9f138e1218a0a4f67fda.png 702w\" data-sizes=\"(max-width: 702px) 100vw, 702px\" data-src=\"/assets/static/exclude-timeshift.15c3bad.da62010dce8c9f138e1218a0a4f67fda.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/exclude-timeshift.15c3bad.da62010dce8c9f138e1218a0a4f67fda.png\" width=\"702\" alt=\"Timeshift exclude\"></noscript></p>\n<p>También hay una versión de consola de Timeshift, puede hacer un chroot en su sistema, montar particiones y revertir la versión. Hay ejemplos en la ayuda, todos simplemente <code>timeshift -h</code>.</p>\n<h2 id=\"rsync\"><a href=\"#rsync\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Rsync</h2>\n<p><img src=\"https://thumbs.gfycat.com/ComplexNeighboringBoilweevil-size_restricted.gif\" alt=\"Terminal\"></p>\n<p>Montamos la partición para la copia de seguridad, primero creamos un directorio.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mount</span> /dev/sdb1 /dump</code></pre>\n<p>Copie <code>/</code> en <code>/dump</code> con una excepción, pero creando los directorios necesarios.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">rsync</span> -avAXHP --delete --delete-excluded --exclude<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"/dev/*\"</span>,<span class=\"token string\">\"/proc/*\"</span>,<span class=\"token string\">\"/sys/*\"</span>,<span class=\"token string\">\"/tmp/*\"</span>,<span class=\"token string\">\"/run/*\"</span>,<span class=\"token string\">\"/mnt/*\"</span>,<span class=\"token string\">\"/media/*\"</span>,<span class=\"token string\">\"/lost+found\"</span>,<span class=\"token string\">\"/var/lib/pacman/sync/*\"</span>,<span class=\"token string\">\"/var/cache/*\"</span>,<span class=\"token string\">\"/var/tmp/*\"</span>,<span class=\"token string\">\"/boot/*\"</span>,<span class=\"token string\">\"/home/*\"</span><span class=\"token punctuation\">}</span> /* /dump/</code></pre>\n<p>Copie todo el sistema.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">rsync</span> -avAXHP --delete --delete-excluded --exclude<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"/dev/*\"</span>,<span class=\"token string\">\"/proc/*\"</span>,<span class=\"token string\">\"/sys/*\"</span>,<span class=\"token string\">\"/tmp/*\"</span>,<span class=\"token string\">\"/run/*\"</span>,<span class=\"token string\">\"/mnt/*\"</span>,<span class=\"token string\">\"/media/*\"</span>,<span class=\"token string\">\"/lost+found\"</span>,<span class=\"token string\">\"/var/lib/pacman/sync/*\"</span>,<span class=\"token string\">\"/var/cache/*\"</span>,<span class=\"token string\">\"/var/tmp/*\"</span>,<span class=\"token string\">\"/home/lost+found\"</span>,<span class=\"token string\">\"/boot/lost+found\"</span><span class=\"token punctuation\">}</span> /* /dump/</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">rsync</span> -avAXHP --delete --delete-excluded --exclude<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"/dev/*\"</span>,<span class=\"token string\">\"/proc/*\"</span>,<span class=\"token string\">\"/sys/*\"</span>,<span class=\"token string\">\"/tmp/*\"</span>,<span class=\"token string\">\"/run/*\"</span>,<span class=\"token string\">\"/mnt/*\"</span>,<span class=\"token string\">\"/media/*\"</span>,<span class=\"token string\">\"/lost+found\"</span>,<span class=\"token string\">\"/var/lib/pacman/sync/*\"</span>,<span class=\"token string\">\"/var/cache/*\"</span>,<span class=\"token string\">\"/var/tmp/*\"</span>,<span class=\"token string\">\"/boot/lost+found\"</span>,<span class=\"token string\">\"/home/lost+found\"</span>,<span class=\"token string\">\"/home/*/.thumbnails/*\"</span>,<span class=\"token string\">\"/home/*/.cache/*\"</span>,<span class=\"token string\">\"/home/*/.local\"</span>,<span class=\"token string\">\"/home/*/.gvfs/*\"</span>,<span class=\"token string\">\"/home/*/files/*\"</span>,<span class=\"token string\">\"/home/*/.var\"</span>,<span class=\"token string\">\"/home/*/.npm\"</span>,<span class=\"token string\">\"/home/*/.node-gyp\"</span>,<span class=\"token string\">\"/home/*/.electron\"</span><span class=\"token punctuation\">}</span> /* /run/media/st/dump/myarch/</code></pre>\n<p>Vale la pena señalar y excluir de <code>/home</code>, como en el ejemplo siguiente.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">--exclude<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"/home/lost+found\"</span>,<span class=\"token string\">\"/home/*/.thumbnails/*\"</span>,<span class=\"token string\">\"/home/*/.cache/mozilla/*\"</span>,<span class=\"token string\">\"/home/*/.local/share/Trash/*\"</span>,<span class=\"token string\">\"/home/*/.gvfs/*\"</span><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">rsync</span> -avAXHP --delete --delete-excluded --exclude<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"/dev/*\"</span>,<span class=\"token string\">\"/proc/*\"</span>,<span class=\"token string\">\"/sys/*\"</span>,<span class=\"token string\">\"/tmp/*\"</span>,<span class=\"token string\">\"/run/*\"</span>,<span class=\"token string\">\"/mnt/*\"</span>,<span class=\"token string\">\"/media/*\"</span>,<span class=\"token string\">\"/lost+found\"</span>,<span class=\"token string\">\"/var/lib/pacman/sync/*\"</span>,<span class=\"token string\">\"/var/cache/*\"</span>,<span class=\"token string\">\"/var/tmp/*\"</span>,<span class=\"token string\">\"/boot/lost+found\"</span>,<span class=\"token string\">\"/home/lost+found\"</span>,<span class=\"token string\">\"/home/*/.thumbnails/*\"</span>,<span class=\"token string\">\"/home/*/.cache/mozilla/*\"</span>,<span class=\"token string\">\"/home/*/.local/share/Trash/*\"</span>,<span class=\"token string\">\"/home/*/.gvfs/*\"</span><span class=\"token punctuation\">}</span> /* /dump/</code></pre>\n<p>Excluya los directorios donde se montan los discos/particiones, si es necesario.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">/home/st/files</code></pre>\n<p>A continuación, creamos un archivo.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> /dump\n<span class=\"token function\">tar</span> -caf <span class=\"token string\">\"/mnt/myarch.tar.xz\"</span> /dump/*</code></pre>\n<p>O gz es más rápido.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> /dump\n<span class=\"token function\">tar</span> -caf <span class=\"token string\">\"/mnt/myarch.tar\"</span> /dump/*\n<span class=\"token function\">gzip</span> -9 <span class=\"token string\">\"/mnt/myarch.tar\"</span></code></pre>\n<h2 id=\"recuperación\"><a href=\"#recuperaci%C3%B3n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Recuperación</h2>\n<p>Formateamos las particiones necesarias usando gparted o manualmente.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">mkfs.ext4 -L <span class=\"token string\">\"root\"</span> /dev/sda5\nmkfs.ext2 -L <span class=\"token string\">\"boot\"</span> /dev/sda2\nmkfs.ext4 -L <span class=\"token string\">\"home\"</span> /dev/sda7\n<span class=\"token function\">mkswap</span> /dev/sda3</code></pre>\n<p>Arrancamos desde un usb en vivo (o desde este sistema), montamos la partición raíz (dev/sda5), arrancamos, etc., si es necesario.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mount</span> /dev/sda5 /mnt\n<span class=\"token function\">mount</span> /dev/sda2 /mnt/boot\n<span class=\"token function\">mount</span> /dev/sda7 /mnt/home\n<span class=\"token function\">swapon</span> /dev/sda3\n\n<span class=\"token comment\"># Cree un directorio y monte la partición con el archivo de respaldo.</span>\n\n<span class=\"token function\">mkdir</span> /mnt/dump\n<span class=\"token function\">mount</span> /dev/sdb1 /mnt/dump</code></pre>\n<p>Vaya al disco montado (donde lo restauramos), descomprima el archivo.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> /mnt\n<span class=\"token function\">tar</span> xvJf /mnt/dump/myarch.tar.xz -С /mnt\nили\n<span class=\"token function\">tar</span> xvzf /mnt/dump/myarch.tar.gz -С /mnt</code></pre>\n<p>Entramos en el nuevo sistema.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">arch-chroot /mnt /bin/zsh</code></pre>\n<p>O.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">chroot</span> /mnt /bin/bash Debian me gusta</code></pre>\n<p>Editar si es necesario<code>/etc/fstab</code>, <code>/etc/mkinitcpio.conf</code>, crear imágenes initramfs.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mv</span> /mnt/etc/fstab /mnt/etc/fstab.bak\ngenfstab -pU /mnt <span class=\"token operator\">></span> /mnt/etc/fstab</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\">mkinitcpio -p linux</code></pre>\n<p>Configurando claves de pacman.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">pacman-key --init\npacman-key --populate archlinux</code></pre>\n<p>Actualizar el menú del cargador de arranque es de mala educación, os-prober (para buscar otro sistema operativo).</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">pacman -S os-prober\ngrub-install /dev/sda\n<span class=\"token function\">grub-mkconfig</span> -o /boot/grub/grub.cfg</code></pre>\n<p>¡Salga del chroot, desmonte las particiones y reinicie el sistema restaurado!</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">umount</span> /mnt/boot\n<span class=\"token function\">umount</span> /mnt/home\n<span class=\"token function\">umount</span> /mnt/dump\n<span class=\"token function\">rmdir</span> /mnt/dump\n<span class=\"token function\">umount</span> /mnt</code></pre>\n<p>O.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">umount</span> -R /mnt\n<span class=\"token function\">reboot</span></code></pre>\n","sidebar":"wiki","next":"/wiki/backup/squashfs/","prev":"","headings":[{"depth":1,"value":"Apoyo","anchor":"#apoyo"},{"depth":2,"value":"Timeshift","anchor":"#timeshift"},{"depth":2,"value":"Rsync","anchor":"#rsync"},{"depth":2,"value":"Recuperación","anchor":"#recuperación"}]},"allMarkdownPage":{"edges":[{"node":{"path":"/wiki/changelog/bspwm-1-0/","title":"Bspwm 1.0B"}},{"node":{"path":"/wiki/wm/bspwm/","title":"Killer-OS Bspwm"}},{"node":{"path":"/wiki/packages/other-pkg/","title":"Añadir. programas"}},{"node":{"path":"/wiki/packages/iwd/","title":"Iwd wifi"}},{"node":{"path":"/wiki/other/screencast/","title":"Screencast"}},{"node":{"path":"/wiki/other/notes/","title":"Notas"}},{"node":{"path":"/wiki/other/grub-uefi/","title":"Grub UEFI"}},{"node":{"path":"/wiki/other/gnupg/","title":"Gnupg"}},{"node":{"path":"/wiki/other/git-start/","title":"Git Start"}},{"node":{"path":"/wiki/config/videocfg/","title":"Видео драйвера"}},{"node":{"path":"/wiki/config/trouble/","title":"Решение проблем"}},{"node":{"path":"/wiki/config/ssh/","title":"Настройка ssh"}},{"node":{"path":"/wiki/config/autologin/","title":"Автологин"}},{"node":{"path":"/wiki/config/recomend/","title":"Рекомендации"}},{"node":{"path":"/wiki/changelog/","title":"Changelog"}},{"node":{"path":"/wiki/btrfs/btrfs-part2/","title":"Btrfs Continuar"}},{"node":{"path":"/wiki/btrfs/btrfs-part1/","title":"Instalación de btrfs"}},{"node":{"path":"/wiki/backup/timeshift-rsync/","title":"Timeshift, rsync"}},{"node":{"path":"/wiki/backup/squashfs/","title":"Squashfs"}},{"node":{"path":"/wiki/backup/netcat/","title":"Netcat, ssh, rsync"}},{"node":{"path":"/wiki/whois/","title":"Brevemente sobre Killer-OS Linux"}},{"node":{"path":"/wiki/","title":"Killer-OS Linux Wiki"}}]}},"context":{}}